<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Decision Style App</title>
    <!-- <link href = '/css/stylesheet.css' rel='stylesheet'> -->
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href = '/css/index.css' rel='stylesheet'>

</head>
<body>
    <div class="container-fluid text-center">
        <div class="perspective-text">
            <div class="perspective-line">
                <p>&nbsp;</p>
                <p>Decision</p>
              </div>
            <div class="perspective-line">
              <p>Decision</p>
              <p>Planning</p>
            </div>
            <div class="perspective-line">
              <p>Planning</p>
              <p>Style</p>
            </div>
            <div class="perspective-line">
              <p>Style</p>
              <p>Depth</p>
            </div>
            <div class="perspective-line">
                <p>Depth</p>
                <p>&nbsp;</p>
            </div>
        </div>
    </div>
    <div class="container-md text-center">
        <h2>You are going to play rounds of 4-in-a-row (Connect 4) game! Achieve a line of four counters in a row horizontally, vertically or diagonally.</h2>
        <div style="height: 6vh;"></div>
        <p class="text-help">â€œThis is a component of an online platform developed as part of an academic research, called <span><a style="color: black; font-weight: bold;" href="https://sealonthebeach.com/seminal/collection">SEMINAL</a></span>. By continuing to the registration page you are giving us consent to use your data for our research purposes. <span><a style="color: black; font-weight: bold;" href="/terms">Click here</a></span>to learn more about the research and how we handle your data</p>
        <div style="height: 10vh;"></div>
        <p class="text-help">Registration will give you access to all the tests and games on the platform. It will also grant you access to data on your performance through various stages. Alternatively, you can continue as a guest by choosing a username.</p>
        <a type="button" class="btn btn-primary" style="margin-top: 6em;" href="/login">Register/Sign In</a>
        <h3 style="text-align: center;">OR</h3>
        <input type="text" id="username" class=" form-control usernameInput" placeholder="Enter Username" required>
        <button type="button" class="btn btn-primary" style="margin-top: 1.2em;" onclick="startGameWithUsername()">Continue as Guest</button>
    </div>   

    <script>
        function startGameWithUsername() {
            const username = document.getElementById('username').value;
            if (username) {
                // Call the API to check if the username exists and create a record if it doesn't
                fetch(`/check-username?username=${username}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.exists) {
                            alert('Username already exists. Please choose a different username.');
                        } else {
                            // Redirect to the game page with the username if it doesn't exist
                            window.location.href = `/playvscomp?username=${username}`;
                        }
                    })
                    .catch(error => {
                        console.error('Error checking username:', error);
                        alert('An error occurred while checking the username. Please try again.');
                    });
            } else {
                alert('Please enter a username');
            }
        }
    </script>
</body>
</html>
